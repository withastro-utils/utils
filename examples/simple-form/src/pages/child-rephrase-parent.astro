---
import { BButton, Bind, BindForm } from "@astro-utils/forms/forms.js";
import { Button } from 'reactstrap';
import Layout from "../layouts/Layout.astro";
import sleep from "sleep-promise";
import SubState from "../components/SubState.astro";

const { session } = Astro.locals;

async function increaseCounter() {
    session.counter ??= 0
    session.counter++;
    console.log(session.counter)
    await sleep(1000 * 5);
}

---
<Layout title="counter">
    <p>
        The inner state reload the parent state, so the parent state will show the new date from the child. <br />
        In this example when you click on the inner-state counter, it will reload the parent counter as well.
    </p>
    <BindForm>
        <BButton as={Button} props={{color: 'info'}} onClick={increaseCounter}>++</BButton>
        {session.counter}

        <p>Sub-state</p>
        <SubState />
    </BindForm>
</Layout>